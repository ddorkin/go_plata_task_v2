# Currency Quote Service

–°–µ—Ä–≤–∏—Å –∫–æ—Ç–∏—Ä–æ–≤–æ–∫ –≤–∞–ª—é—Ç–Ω—ã—Ö –∫—É—Ä—Å–æ–≤ —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç HTTP API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ—Ç–∏—Ä–æ–≤–æ–∫ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç.

## üìã API Endpoints

### 1. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ—Ç–∏—Ä–æ–≤–∫—É –≤–∞–ª—é—Ç–Ω–æ–π –ø–∞—Ä—ã
```http
POST /api/v1/quotes/update
Content-Type: application/json

{
  "from": "EUR",
  "to": "MXN"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": "1234567890",
  "from": "EUR",
  "to": "MXN",
  "status": "pending"
}
```

### 2. –ü–æ–ª—É—á–∏—Ç—å –∫–æ—Ç–∏—Ä–æ–≤–∫—É –ø–æ ID
```http
GET /api/v1/quotes/{id}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": "4567890123",
  "from": "EUR",
  "to": "MXN",
  "rate": 0.04628,
  "updated_at": "2025-09-28T10:30:00Z"
}
```

### 3. –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –∫–æ—Ç–∏—Ä–æ–≤–∫—É –≤–∞–ª—é—Ç–Ω–æ–π –ø–∞—Ä—ã
```http
GET /api/v1/quotes/latest?from={from}&to={to}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": "4567890123",
  "from": "EUR",
  "to": "MXN",
  "rate": 0.04628,
  "updated_at": "2025-09-28T10:30:00Z"
}
```

### 4. Health Check
```http
GET /api/v1/health
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "healthy",
  "service": "currency-quote-service",
  "timestamp": "2025-09-28T10:30:00Z"
}
```

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Go 1.21+
- PostgreSQL 12+
- Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
```bash
git clone <repository-url>
cd go_plata_task_v2
```

2. **–ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
```bash
make setup
```
–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (swag, golangci-lint)
- –°–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∫ —Ä–∞–±–æ—Ç–µ

3. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ - —Ä—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
make deps

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
make install-tools

# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
make swagger
```

5. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
```bash
# –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL
createdb currency_quotes

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker
docker run --name postgres -e POSTGRES_DB=currency_quotes -e POSTGRES_PASSWORD=postgres -p 5432:5432 -d postgres:15-alpine
```

6. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```bash
cp env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª –ø–æ–¥ –≤–∞—à–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```

7. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å:**
```bash
make run
```

### Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
make docker-compose-up

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
make docker-compose-down
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç swag –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
make swagger
```

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8080/swagger/

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
make test

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
go test -v ./...
```

## Docker

### –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
```bash
make docker-build
```

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```bash
make docker-run
```

### Docker Compose
```bash
# –ó–∞–ø—É—Å–∫ —Å PostgreSQL
make docker-compose-up

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
make docker-compose-down
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ—Ç–∏—Ä–æ–≤–∫–∏ EUR/MXN
```bash
curl -X POST http://localhost:8080/api/v1/quotes/update \
  -H "Content-Type: application/json" \
  -d '{"from": "EUR", "to": "MXN"}'
```

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ ID
```bash
curl http://localhost:8080/api/v1/quotes/1234567890
```

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∫–æ—Ç–∏—Ä–æ–≤–∫–∏ EUR/MXN
```bash
curl "http://localhost:8080/api/v1/quotes/latest?from=EUR&to=MXN"
```


# –û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è.
–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ç–æ—á–Ω–µ–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π, –º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –≤–Ω–µ—à–Ω–µ–º—É –∏—Å—Ç–æ—á–Ω–∏–∫—É. –ù–∞—Å–∫–æ–ª—å–∫–æ —è –ø–æ–Ω–∏–º–∞—é, –¥–ª—è –∏–Ω–¥—É—Å—Ç—Ä–∏–∏ –≤ —Ü–µ–ª–æ–º –Ω–æ—Ä–º–∞–ª—å–Ω–æ –∏–º–µ—Ç—å USD –∫–∞–∫ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—É—é –≤–∞–ª—é—Ç—É –¥–ª—è –∫–æ—Ç–∏—Ä–æ–≤–æ–∫, –ø–æ—ç—Ç–æ–º—É –≤ —Ç–µ–∫—É—â–µ–º –ø–æ–¥—Ö–æ–¥–µ –æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É—Ç—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ base –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –∫–æ—Ç–∏—Ä–æ–≤–∫—É. –í –ª—é–±–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —ç—Ç–æ—Ç —Ç—Ä–µ—Ç–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫ –±—É–¥–µ—Ç —è–≤–ª—è—Ç—å—Å—è "–±—É—Ç—ã–ª–æ—á–Ω—ã–º –≥–æ—Ä–ª—ã—à–∫–æ–º" –∏ —á—Ç–æ–±—ã —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞, –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –≤—Å–µ—Ö –≤–∞–ª—é—Ç, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö –≤ –±–∞–∑–µ –Ω–∞ –º–æ–º–µ–Ω—Ç –≤—ã–∑–æ–≤–∞ –≤–æ—Ä–∫–µ—Ä–∞, –∞ –ø–æ—Å–ª–µ —É–∂–µ –¥–µ–ª–∞—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∏ –º–∞–ø–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ.
–°–µ–π—á–∞—Å —Å —Ç–µ–∫—É—â–∏–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏, —á—Ç–æ –Ω–∞–¥–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ 3 –≤–∞–ª—é—Ç—ã - —ç—Ç–æ –≤—Å—ë –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º –∑–∞ –æ–¥–∏–Ω –ø—Ä–æ—Ö–æ–¥ –≤–æ—Ä–∫–µ—Ä–∞.
–í–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ fxratesapi) –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç —è–≤–ª—è—Ç—å "–±—É—Ç—ã–ª–æ—á–Ω—ã–º –≥–æ—Ä–ª—ã—à–∫–æ–º" –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞.
–í –±—É–¥—É—â–µ–º —Å—Ç–æ–∏—Ç –¥–æ–±–∞–≤–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –≤—ã–∑–æ–≤–æ–≤ (rate limiting), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã API. –ü–ª—é—Å –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (—Å–∞–π—Ç–æ–≤, –≥–¥–µ –º—ã –±–µ—Ä—ë–º –∫–æ—Ç–∏—Ä–æ–≤–∫–∏) –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ (–µ—Å–ª–∏ –º—ã –¥–æ–ø—É—Å–∫–∞–µ–º —Ä–∞–≤–Ω–æ–∑–Ω–∞—á–Ω–æ—Å—Ç—å –∏—Ö –¥–∞–Ω–Ω—ã—Ö) –∏ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ —Å—Ç–æ—Ä–æ–Ω—É —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –º–µ–∂–¥—É –Ω–∏–º–∏. –ü–ª—é—Å —Ç–∞–∫–∂–µ –ø–æ–¥—É–º–∞—Ç—å –≤ —Å—Ç–æ—Ä–æ–Ω—É –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –¥–æ–±–∞–≤–∏—Ç—å fallback –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–µ—Å–ª–∏ —ç—Ç–æ –±—É–¥–µ—Ç –≤–∞–ª–∏–¥–Ω–æ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å–∞).
–í –¥–∞–ª—å–Ω–µ–π—à–µ–º —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Ä–∞–±–æ—Ç–∞ —Å –æ—á–µ—Ä–µ–¥—è–º–∏ (–Ω–æ –≤—Å—ë –±—É–¥–µ—Ç –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∏ –Ω–∞–≥—Ä—É–∑–æ–∫), —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã —Å –æ–±—â–µ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (–∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç —à–∞—Ä–¥–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è aws, gcp, azure). –û–¥–∏–Ω –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å (—É –Ω–µ–≥–æ –º–æ–∂–Ω–æ –±—ã—Ç—å –º–Ω–æ–≥–æ —Ä–µ–ø–ª–∏–∫) –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã, –æ—Ç–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î, –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏. –î—Ä—É–≥–æ–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å (—Ç–æ–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–ø–ª–∏–∫), –±—É–¥—É—Ç —ç—Ç–∏ –∑–∞–ø—Ä–æ—Å—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –æ–±–µ—Å–ø–µ—á–∏—Ç –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ –≥–∏–±–∫–æ—Å—Ç—å –ø—Ä–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –Ω–∞–≥—Ä—É–∑–∫–∏.